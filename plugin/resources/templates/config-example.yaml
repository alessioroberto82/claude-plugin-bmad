# BMAD — Per-Project Configuration
# Copy this file to: ~/.claude/bmad/projects/<project-name>/config.yaml
#
# All fields are optional. Only include what you need to override.

# Custom template directory (in addition to bundled templates)
# templates_dir: /path/to/your/templates/

# Domain override (skip auto-detection: software or general)
# domain: software

# Template variant overrides (force a specific template variant)
# templates:
#   module-architecture: module-architecture-swift  # Force Swift variant

# Optional phases enabled by default for greenfield workflow
# Note: security is always mandatory and cannot be disabled here
greenfield_defaults:
  ux: true
  facilitate: false

# Test-Driven Development (TDD) enforcement
# TDD is enabled by default. bmad-impl uses red-green-refactor cycle via bmad-tdd
# for each implementation unit. bmad-qa verifies TDD compliance by inspecting commit
# history for test(red): → feat(green): → refactor: pattern.
# When the workflow doesn't involve testable code, bmad-impl prompts to disable.
tdd:
  enabled: true           # Enable TDD workflow (default: true)
  enforcement: hard       # hard = QA blocks on violation; soft = QA warns only

# Model routing — assign Claude model per role (opus, sonnet, haiku)
# Roles with context: fork run as subagents and respect this setting.
# Roles with context: same inherit the session model (setting is ignored).
# Default: inherits from session (usually opus).
#
# Role overrides — add model, extra context, or instructions per role
agents:
  bmad-scope:
    model: sonnet
  bmad-prioritize:
    model: sonnet
  bmad-arch:
    model: opus
    # Additional files to read for architectural context
    context_files:
      - docs/ARCHITECTURE.md
      - docs/ADR/
    # Extra instructions appended to the role's prompt
    extra_instructions: |
      This project uses a layered architecture with dependency injection.
      All new modules must follow the existing pattern.
  bmad-security:
    model: opus
  bmad-facilitate:
    model: haiku
  bmad-impl:
    model: opus
    context_files:
      - src/
    extra_instructions: |
      Follow project coding standards and existing conventions.
      All public APIs must have documentation comments.
  bmad-qa:
    model: sonnet
    extra_instructions: |
      Minimum test coverage target: 80%.
      Focus on integration tests for data flows.
  bmad-ux:
    model: sonnet
    extra_instructions: |
      Follow platform design guidelines.
      Support accessibility features.

# Code review agent models (bmad-code-review spawns 2 parallel agents)
code_review:
  agent_a_model: sonnet    # Standards & Bugs
  agent_b_model: sonnet    # Security

# Linear project mapping (for MCP integration)
# linear:
#   team: "My Team"
#   project: "My Project"

# claude-mem project name (for memory search scoping)
# memory_project: "my-project"

# Dependency overrides (optional)
# Override which dependencies are installed for this project.
# See deps-manifest.yaml for the full list of available dependencies.
# dependencies:
#   notion: include          # Include an extra that's off by default
#   claude-mem:              # Replace a default with an alternative
#     skip: true
#     alternative:
#       name: "my-custom-memory"
#       type: plugin
#       marketplace: my-marketplace
#       install: "claude plugin install my-custom-memory@my-marketplace"
